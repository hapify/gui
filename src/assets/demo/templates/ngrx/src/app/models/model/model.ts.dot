{{ function type(f) {
  let out = "";

  if (f.type === "boolean") out += "boolean";
  else if (f.type === "string") out += "string";
  else if (f.type === "number") out += "number";
  else if (f.type === "datetime") out += "number | Date";
  else if (f.type === "entity") out += `string | ${f.m.names.upperCamel} | ${f.m.names.upperCamel}Interface`;
  else out += "any";

  if (f.nullable) out += " | null";

  return out;
}
function labels(lbs) {
    return lbs
        .map(lb => "${this.props."+lb.names.underscore+"}")
        .join(' ');
}
}}import {Helpers} from '@app/shared';
import {Subject} from 'rxjs/Subject';{{~it.m.d.l: d}}
import {{{=d.names.upperCamel}}, {{=d.names.upperCamel}}Interface} from '../{{=d.names.hyphen}}/{{=d.names.hyphen}}';{{~}}

export interface {{=it.m.names.upperCamel}}Interface {{{~it.m.f.l : f}}
  {{=f.names.underscore}}?: {{ out += type(f); }};{{~}}
}

export class {{=it.m.names.upperCamel}} extends Subject<void> {

  /**
   * Store {{=it.m.names.wordsLower}} properties
   */
  props: {{=it.m.names.upperCamel}}Interface = {};

  /**
   * Constructor
   */
  constructor() {
    super();
  }

  /**
   * Short function to get id
   *
   * @return {string}
   */
  getId(): string {
    return this.props.{{=it.m.f.p.names.underscore}};
  }

  /**
   * Short function to get label of instance
   *
   * @return {string}
   */
  getLabel(): string {{{?it.m.f.lb.length}}
    return `{{ out += labels(it.m.f.lb); }}`{{??}}
    return this.props.{{=it.m.f.p.names.underscore}};{{?}}
  }

  /**
   * Denotes if the instance has been created or already exists in the API
   *
   * @return {boolean}
   */
  isNew(): boolean {
    return !this.getId();
  }

  /**
   * Denotes if the instance has been populated
   *
   * @return {boolean}
   */
  exists(): boolean {
    return !!this.props && typeof this.getId() !== 'undefined';
  }{{~it.m.f.r: r}}

  /**
   * Denotes if the instance of {{=r.names.wordsLower}} has been populated
   *
   * @return {boolean}
   */
  {{=r.names.lowerCamel}}Exists(): boolean {
    return !!this.props &&
        this.props.{{=r.names.underscore}} instanceof {{=r.m.names.upperCamel}} &&
        this.props.{{=r.names.underscore}}.exists();
  }{{~}}

  /**
   * Populate the current instance from an object
   *
   * @param {{{=it.m.names.upperCamel}}Interface} object
   */
  fromObject(object: {{=it.m.names.upperCamel}}Interface): void {
    this.props = Object.assign({}, object);{{~it.m.f.f(f => f.type === 'datetime'): f }}
    {{?f.nullable}}if (this.props.{{=f.names.underscore}} !== null) {
        {{?}}this.props.{{=f.names.underscore}} = Helpers.convertToDate(this.props.{{=f.names.underscore}});{{?f.nullable}}
    }{{?}}{{~}}{{~it.m.f.r: r}}
    if ({{?r.nullable}}this.props.{{=r.names.underscore}} !== null && {{?}}typeof this.props.{{=r.names.underscore}} === 'object') {
        const {{=r.names.lowerCamel}} = new {{=r.m.names.upperCamel}}();
        {{=r.names.lowerCamel}}.fromObject(<{{=r.m.names.upperCamel}}Interface>this.props.{{=r.names.underscore}});
        this.props.{{=r.names.underscore}} = {{=r.names.lowerCamel}}
    }{{~}}
  }

  /**
   * Convert the current instance to an object
   *
   * @return {{{=it.m.names.upperCamel}}Interface}
   */
  toObject(): {{=it.m.names.upperCamel}}Interface {
    const props = Object.assign({}, this.props);{{~it.m.f.f(f => f.nullable && !f.isPrivate): f }}{{?f.type === 'string'}}
    if (typeof props.{{=f.names.underscore}} !== 'string' || props.{{=f.names.underscore}}.length === 0) {
        props.{{=f.names.underscore}} = null;
    }{{??}}
    if (typeof props.{{=f.names.underscore}} === 'undefined') {
        props.{{=f.names.underscore}} = null;
    }{{?}}{{~}}{{~it.m.f.f(f => f.type === 'datetime'): f }}
    {{?f.nullable}}if (props.{{=f.names.underscore}} !== null) {
        {{?}}props.{{=f.names.underscore}} = Helpers.convertToTimestamp(props.{{=f.names.underscore}});{{?f.nullable}}
    }{{?}}{{~}}{{~it.m.f.r: r}}
    if ({{?r.nullable}}props.{{=r.names.underscore}} !== null && {{?}}props.{{=r.names.underscore}} instanceof {{=r.m.names.upperCamel}}) {
        props.{{=r.names.underscore}} = props.{{=r.names.underscore}}.toObject();
    }{{~}}
    return props;
  }
}
