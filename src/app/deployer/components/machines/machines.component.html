<div class="container-fluid">

    <div class="row">
        <div class="col-12">
            <p class="text-secondary mb-5">
                {{ 'deployer_machines_intro' | translate }}
            </p>
        </div>
    </div>
    <div class="machines-list">
        <div class="card">
            <div class="card-header">
                <div class="clearfix">
                    <div class="float-left py-2">
                        {{ 'deployer_machines_subtitle' | translate:{count: machines ? machines.length : 0} }}
                    </div>
                </div>
            </div>
            <div *ngIf="machines && machines.length">
                <ul class="list-group list-group-flush">
                    <li *ngFor="let machine of machines;" class="list-group-item">
                        <div class="row">
                            <div class="col-lg-9 col-12">
                                <div>
                                    <b class="mr-2">{{ machine.name }}</b>
                                    <span class="mr-2">
                                        <span *ngIf="machine.pending" class="badge badge-pill badge-info">
                                          {{ 'deployer_machines_label_starting' | translate }}
                                        </span>
                                        <span *ngIf="!machine.pending" class="badge badge-pill badge-success">
                                          {{ 'deployer_machines_label_running' | translate }}
                                        </span>
                                    </span>
                                    <span class="mr-2">
                                        <span *ngIf="machine.populate" class="badge badge-pill badge-secondary">
                                          {{ 'deployer_machines_label_populated' | translate }}
                                        </span>
                                    </span>
                                    <span class="mr-2">
                                        <span class="badge badge-pill badge-secondary">
                                          {{ 'deployer_machines_label_branch' | translate:{name: machine.branch} }}
                                        </span>
                                    </span>
                                    <span class="mr-2">
                                        <span class="badge badge-pill badge-secondary">
                                          {{ 'deployer_machines_label_stack' | translate:{name: machine.stack} }}
                                        </span>
                                    </span>
                                    <span *ngIf="machine.ip" class="mr-2">
                                        <span class="badge badge-pill badge-secondary">
                                          {{ 'deployer_machines_label_ip' | translate:{value: machine.ip} }}
                                        </span>
                                    </span>
                                    <span *ngIf="machine.creation" class="mr-2">
                                        <span class="badge badge-pill badge-primary">
                                          {{ 'deployer_machines_label_creation' | translate }}
                                          {{ machine.creation |Â timeAgo }}
                                        </span>
                                    </span>
                                </div>
                                <div *ngIf="machine.urls" class="mt-3">
                                    <div *ngFor="let key of machine.urls | objectKeys" class="mb-2">
                                        <span class="badge badge-secondary">{{ key }}</span>
                                        <a href="{{ machine.urls[key] }}" target="_blank" class="text-secondary small">
                                            <span class="mr-1">{{ machine.urls[key] }}</span>
                                            <span class="oi oi-external-link"></span>
                                        </a>
                                    </div>
                                </div>    
                            </div>
                            <div class="col-12 col-lg-3 mt-2 mt-lg-0 text-lg-right">
                                <button *ngIf="!machine._unlocked" type="button" class="btn btn-outline-secondary"
                                        (click)="machine._unlocked=!machine._unlocked">
                                    <span class="oi oi-circle-x"></span>
                                </button>
                                <button *ngIf="machine._unlocked" type="button" class="btn btn-outline-danger" (click)="didClickDelete(machine)">
                                    {{ 'deployer_machines_delete_confirm' | translate }}
                                </button>
                                <button *ngIf="machine._unlocked" type="button" class="btn btn-outline-secondary" (click)="machine._unlocked=false">
                                    {{ 'deployer_machines_delete_cancel' | translate }}
                                </button>
                            </div>
                        </div>
                        
                    </li>
                </ul>
            </div>
        </div>
    </div>

</div>

